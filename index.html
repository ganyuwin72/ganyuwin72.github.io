<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>学习计划管理</title>
  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <style>
    .task-done {
      text-decoration: line-through;
      color: gray;
    }
  </style>
</head>
<body>
  <div class="container py-4">
    <h1 class="text-center mb-4 text-primary">学习计划管理</h1>

    <!-- 任务管理区 -->
    <div class="card mb-4">
      <div class="card-header">任务列表</div>
      <div class="card-body">
        <div class="input-group mb-3">
          <input
            id="taskInput"
            type="text"
            class="form-control"
            placeholder="输入新任务"
          />
          <button class="btn btn-primary" onclick="addTask()">添加任务</button>
        </div>
        <ul id="taskList" class="list-group"></ul>
      </div>
    </div>

    <!-- 学习时长区 -->
    <div class="card">
      <div class="card-header">学习时长统计</div>
      <div class="card-body text-center">
        <p class="fs-4">
          已学习：
          <span id="time">0</span> 分钟
        </p>
        <button class="btn btn-success me-2" onclick="startTimer()">
          开始计时
        </button>
        <button class="btn btn-danger" onclick="stopTimer()">
          停止计时
        </button>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS Bundle (包含 Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // 任务相关逻辑
    const taskList = document.getElementById("taskList");
    const taskInput = document.getElementById("taskInput");
    let tasks = JSON.parse(localStorage.getItem("tasks") || "[]");

    function saveTasks() {
      localStorage.setItem("tasks", JSON.stringify(tasks));
    }

    function renderTasks() {
      taskList.innerHTML = "";
      tasks.forEach((task, i) => {
        const li = document.createElement("li");
        li.className = "list-group-item d-flex justify-content-between align-items-center";
        if (task.done) li.classList.add("task-done");
        li.textContent = task.text;
        li.onclick = () => toggleTask(i);

        // 删除按钮
        const delBtn = document.createElement("button");
        delBtn.className = "btn btn-sm btn-outline-danger";
        delBtn.textContent = "删除";
        delBtn.onclick = (e) => {
          e.stopPropagation();
          deleteTask(i);
        };
        li.appendChild(delBtn);
        taskList.appendChild(li);
      });
    }

    function addTask() {
      const text = taskInput.value.trim();
      if (!text) return alert("请输入任务内容");
      tasks.push({ text, done: false });
      taskInput.value = "";
      saveTasks();
      renderTasks();
    }

    function toggleTask(i) {
      tasks[i].done = !tasks[i].done;
      saveTasks();
      renderTasks();
    }

    function deleteTask(i) {
      tasks.splice(i, 1);
      saveTasks();
      renderTasks();
    }

    renderTasks();

    // 学习时长计时器
    let timer = null;
    let minutes = parseInt(localStorage.getItem("minutes") || "0");
    document.getElementById("time").textContent = minutes;

    function startTimer() {
      if (timer) return;
      timer = setInterval(() => {
        minutes++;
        document.getElementById("time").textContent = minutes;
        localStorage.setItem("minutes", minutes);
      }, 60000);
    }

    function stopTimer() {
      clearInterval(timer);
      timer = null;
    }
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>学习计划</title>
<style>
  body { font-family: sans-serif; max-width: 600px; margin: 20px auto; }
  li.done { text-decoration: line-through; color: gray; }
</style>
</head>
<body>
<h1>我的任务管理</h1>

<input id="taskInput" type="text" placeholder="输入新任务">
<button onclick="addTask()">添加任务</button>

<ul id="taskList"></ul>

<script>
const taskList = document.getElementById('taskList');
const taskInput = document.getElementById('taskInput');

// 从 localStorage 加载任务
let tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
renderTasks();

function addTask() {
    const text = taskInput.value.trim();
    if (!text) return;
    tasks.push({text, done: false});
    taskInput.value = '';
    saveTasks();
    renderTasks();
}

function toggleTask(i) {
    tasks[i].done = !tasks[i].done;
    saveTasks();
    renderTasks();
}

function deleteTask(i) {
    tasks.splice(i, 1);
    saveTasks();
    renderTasks();
}

function renderTasks() {
    taskList.innerHTML = '';
    tasks.forEach((task, i) => {
        const li = document.createElement('li');
        li.textContent = task.text;
        li.className = task.done ? 'done' : '';
        li.onclick = () => toggleTask(i);

        const delBtn = document.createElement('button');
        delBtn.textContent = '删除';
        delBtn.onclick = (e) => {
            e.stopPropagation();
            deleteTask(i);
        };

        li.appendChild(delBtn);
        taskList.appendChild(li);
    });
}

function saveTasks() {
    localStorage.setItem('tasks', JSON.stringify(tasks));
}
</script>
<h2>学习时长统计</h2>
<p>已学习：<span id="time">0</span> 分钟</p>
<button onclick="start()">开始</button>
<button onclick="stop()">停止</button>

<script>
let timer = null;
let minutes = parseInt(localStorage.getItem('minutes') || '0');
document.getElementById('time').textContent = minutes;

function start() {
    if (timer) return;
    timer = setInterval(() => {
        minutes++;
        document.getElementById('time').textContent = minutes;
        localStorage.setItem('minutes', minutes);
    }, 60000); // 1分钟
}

function stop() {
    clearInterval(timer);
    timer = null;
}
</script>
</body>
</html>
